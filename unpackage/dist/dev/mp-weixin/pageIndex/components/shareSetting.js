"use strict";var e=require("../../common/vendor.js"),d=require("../../utils/base.js"),h=require("../../utils/api.js"),c=require("../../common/assets.js");require("../../utils/http.js");require("../../utils/index1.js");const p=()=>"../index/components/create-share.js",b={data(){return{showPage:!0,resetName:"",listItem:{name:"",size:"",fileClass:""},selectItemsAry:[],button_2:0,button_3:"",passwordShow:!1,button_5:"",downNumber:10,downDay:1,button_4:0,button_1:0,fileListAllNum:0,code:"",overTime:"",shareUrl:"",superFolder:0}},components:{createShare:p},methods:{async multiplcShareFunc(i){if(this.selectItemsAry.length==0){e.index.showToast({icon:"none",title:"\u8BF7\u9009\u62E9\u6587\u4EF6"});return}let n={},a=[],l=[];if(this.selectItemsAry.length==0)return;let s=0,t=!1;if(this.selectItemsAry.forEach(r=>{if(r.moveType=="2"?(s+=r.folderSize*1,l.push(r.folderId)):(s+=r.fileSize*1,a.push(r.fileId)),r.folderName&&r.filesNum==0){t=!0;return}}),n.filesSize=s,s==0||t==!0){e.index.showToast({icon:"none",title:"\u7A7A\u6587\u4EF6\u4E0D\u80FD\u5206\u4EAB"});return}n.downloadLimit=this.downNumber,n.downDay=this.downDay,n.openPass=this.button_2,n.pass=this.button_3,n.enablePreview=this.button_4,n.shareFlow=this.button_1,n.description=this.button_5;let _=n;const u=await h.everBoxShare({transfersVO:_,fileIdList:a,folderIdList:l,superFolder:0});if(u.data.code==1){e.index.showToast({icon:"none",title:res.data.msg});return}this.fileListAllNum=u.data.data.filesNum,this.code=u.data.data.pickupCode;const m=u.data.data.transferGuid;this.overTime=u.data.data.validDate,this.shareUrl=d.urlOSS+u.data.data.link,await h.sendEmailAndSMS(m),i==1&&(this.$refs.sharePop.close(),this.$refs.createShareRef.open())},changeBtn(){if(!this.button_5){this.button_5="\u4F20\u8F93\u6587\u4EF6\u63CF\u8FF0\uFF08\u9009\u586B\uFF09...";let i=setTimeout(()=>{this.button_5="",clearTimeout(i)},50)}},switch2Change(i){i.target.value?this.button_2=1:this.button_2=0,console.log(this.button_2)},switch1Change(i){i.target.value?this.button_1=0:this.button_1=1,console.log(this.button_1)},switch4Change(i){i.target.value?this.button_4=1:this.button_4=0,console.log(this.button_4)},bindTextAreaBlur(i){console.log(i),console.log(this.button_5)},resetDate(){this.button_5="",this.button_2=0,this.passwordShow=!1,this.downNumber=10,this.downDay=1,this.button_4=0,this.button_1=0},closeShare(){console.log("test"),this.resetDate(),this.$refs.sharePop.close()}},mounted(){}};if(!Array){const i=e.resolveComponent("uni-number-box"),n=e.resolveComponent("uni-tooltip"),a=e.resolveComponent("uni-popup"),l=e.resolveComponent("createShare");(i+n+a+l)()}const f=()=>"../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.js",w=()=>"../../uni_modules/uni-tooltip/components/uni-tooltip/uni-tooltip.js",v=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(f+w+v)();function g(i,n,a,l,o,s){return e.e({a:e.o((...t)=>s.closeShare&&s.closeShare(...t)),b:c._imports_3,c:e.o((...t)=>s.bindTextAreaBlur&&s.bindTextAreaBlur(...t)),d:e.o((...t)=>s.bindTextAreaBlur&&s.bindTextAreaBlur(...t)),e:o.button_5,f:e.o(t=>o.button_5=t.detail.value),g:o.button_2==0},o.button_2==0?{}:e.e({h:o.passwordShow?"text":"password",i:o.button_3,j:e.o(t=>o.button_3=t.detail.value),k:o.passwordShow},o.passwordShow?{l:e.o(t=>o.passwordShow=!1),m:c._imports_1$1}:{n:e.o(t=>o.passwordShow=!0),o:c._imports_2$1}),{p:o.button_2==1,q:e.o((...t)=>s.switch2Change&&s.switch2Change(...t)),r:e.o(t=>o.downNumber=t),s:e.p({min:1,max:999,modelValue:o.downNumber}),t:e.o(t=>o.downDay=t),v:e.p({min:1,max:9999,modelValue:o.downDay}),w:o.button_4==1,x:e.o((...t)=>s.switch4Change&&s.switch4Change(...t)),y:c._imports_3$1,z:e.p({content:"\u5BF9\u65B9\u4E0B\u8F7D\u65F6\u4F7F\u7528\u60A8\u7684\u6D41\u91CF"}),A:o.button_1==0,B:e.o((...t)=>s.switch1Change&&s.switch1Change(...t)),C:e.o(t=>s.multiplcShareFunc(1)),D:e.sr("sharePop","1ed83ac0-0"),E:e.o(s.closeShare),F:e.p({type:"bottom",["mask-click"]:!1,["safe-area"]:!1}),G:e.sr("createShareRef","1ed83ac0-4")})}var S=e._export_sfc(b,[["render",g],["__scopeId","data-v-1ed83ac0"],["__file","E:/Code/BeiJing-Digitalsee/Group-project/pageIndex/components/shareSetting.vue"]]);wx.createComponent(S);
