"use strict";var e=require("../../common/vendor.js"),m=require("../../utils/base.js"),h=require("../../utils/api.js"),a=require("../../common/assets.js");require("../../utils/http.js");require("../../utils/index1.js");const p={data(){return{showPage:!0,resetName:"",listItem:{name:"",size:"",fileClass:""},selectItemsAry:[],button_2:0,button_3:"",passwordShow:!1,button_5:"",downNumber:10,downDay:1,button_4:0,button_1:0,fileListAllNum:0,code:"",overTime:"",shareUrl:"",superFolder:0}},components:{},methods:{async multiplcShareFunc(i){if(this.selectItemsAry.length==0){e.index.showToast({icon:"none",title:"\u8BF7\u9009\u62E9\u6587\u4EF6"});return}console.log(this.superFolder),console.log(this.selectItemsAry);let n={},l=[],c=[],o=this.selectItemsAry.length;if(console.log(o),o==0)return;let s=0,t=!1;if(this.selectItemsAry.forEach(r=>{if(r.moveType=="2"?(s+=r.folderSize*1,c.push(r.folderId)):(s+=r.fileSize*1,l.push(r.fileId)),r.folderName&&r.filesNum==0){t=!0;return}}),n.filesSize=s,s==0||t==!0){e.index.showToast({icon:"none",title:"\u7A7A\u6587\u4EF6\u4E0D\u80FD\u5206\u4EAB"});return}n.downloadLimit=this.downNumber,n.downDay=this.downDay,n.openPass=this.button_2,n.pass=this.button_3,n.enablePreview=this.button_4,n.shareFlow=this.button_1,n.description=this.button_5;let _=n;const u=await h.everBoxShare({transfersVO:_,fileIdList:l,folderIdList:c,superFolder:0});if(console.log(u.data),u.data.code==1){e.index.showToast({icon:"none",title:res.data.msg});return}this.fileListAllNum=u.data.data.filesNum,this.code=u.data.data.pickupCode;const d=u.data.data.transferGuid;this.overTime=u.data.data.validDate,this.shareUrl=m.urlOSS+u.data.data.link,await h.sendEmailAndSMS(d),i==1&&(console.log(this.shareUrl),e.index.showToast({title:"\u521B\u5EFA\u5206\u4EAB\u6210\u529F\uFF01"}),console.log(this.selectItemsAry),console.log(this.listName),this.$refs.sharePop.close())},changeBtn(){if(!this.button_5){this.button_5="\u4F20\u8F93\u6587\u4EF6\u63CF\u8FF0\uFF08\u9009\u586B\uFF09...";let i=setTimeout(()=>{this.button_5="",clearTimeout(i)},50)}},switch2Change(i){i.target.value?this.button_2=1:this.button_2=0,console.log(this.button_2)},switch1Change(i){i.target.value?this.button_1=0:this.button_1=1,console.log(this.button_1)},switch4Change(i){i.target.value?this.button_4=1:this.button_4=0,console.log(this.button_4)},bindTextAreaBlur(i){console.log(i),console.log(this.button_5)},resetDate(){this.button_5="",this.button_2=0,this.passwordShow=!1,this.downNumber=10,this.downDay=1,this.button_4=0,this.button_1=0},closeShare(){this.resetDate(),this.$refs.sharePop.close()}},mounted(){}};if(!Array){const i=e.resolveComponent("uni-number-box"),n=e.resolveComponent("uni-tooltip"),l=e.resolveComponent("uni-popup");(i+n+l)()}const b=()=>"../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.js",w=()=>"../../uni_modules/uni-tooltip/components/uni-tooltip/uni-tooltip.js",f=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(b+w+f)();function g(i,n,l,c,o,s){return e.e({a:e.o((...t)=>s.closeShare&&s.closeShare(...t)),b:a._imports_3,c:e.o((...t)=>s.bindTextAreaBlur&&s.bindTextAreaBlur(...t)),d:o.button_5,e:e.o(t=>o.button_5=t.detail.value),f:o.button_2==0},o.button_2==0?{}:e.e({g:o.passwordShow?"text":"password",h:o.button_3,i:e.o(t=>o.button_3=t.detail.value),j:o.passwordShow},o.passwordShow?{k:e.o(t=>o.passwordShow=!1),l:a._imports_1$1}:{m:e.o(t=>o.passwordShow=!0),n:a._imports_2$1}),{o:o.button_2==1,p:e.o((...t)=>s.switch2Change&&s.switch2Change(...t)),q:e.o(t=>o.downNumber=t),r:e.p({min:1,max:999,modelValue:o.downNumber}),s:e.o(t=>o.downDay=t),t:e.p({min:1,max:9999,modelValue:o.downDay}),v:o.button_4==1,w:e.o((...t)=>s.switch4Change&&s.switch4Change(...t)),x:a._imports_3$1,y:e.p({content:"\u5BF9\u65B9\u4E0B\u8F7D\u65F6\u4F7F\u7528\u60A8\u7684\u6D41\u91CF"}),z:o.button_1==0,A:e.o((...t)=>s.switch1Change&&s.switch1Change(...t)),B:e.o(t=>s.multiplcShareFunc(1)),C:e.sr("sharePop","1ed83ac0-0"),D:e.o(s.closeShare),E:e.p({type:"bottom",["mask-click"]:!1,["safe-area"]:!1})})}var v=e._export_sfc(p,[["render",g],["__scopeId","data-v-1ed83ac0"],["__file","D:/WXFile/WeChat Files/wxid_24g7xarmwwne22/FileStorage/File/2023-06/483a303c5dc0354ecc26cfa10a7ddca7_c3ad831319d2832c177ef660df75d852_8/wkkcApplet/pageIndex/components/shareSetting.vue"]]);wx.createComponent(v);
