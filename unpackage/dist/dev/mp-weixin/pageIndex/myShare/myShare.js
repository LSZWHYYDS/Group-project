"use strict";var D=Object.defineProperty;var S=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var g=(e,i,o)=>i in e?D(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,y=(e,i)=>{for(var o in i||(i={}))_.call(i,o)&&g(e,o,i[o]);if(S)for(var o of S(i))A.call(i,o)&&g(e,o,i[o]);return e};var s=require("../../common/vendor.js"),h=require("../../utils/index.js");require("../../utils/base.js");var m=require("../../utils/api.js");require("../../utils/ali-oss.js");var c=require("../../common/assets.js");require("../../utils/http.js");require("../../utils/index1.js");const I=()=>"../../components/tabber.js",b={data(){return{number:1,sortNum:1,isSelectAll:!1,isShowTitle:!0,timeDate:[],timename:[],fileList:[],flodersList:[],filezonglist:[],folderId:0,breadCrumList:[],selectArray:[],selectItemsAry:[],itemData:"",allSelect:!1,quanxuan:!0,pageNum:1,timeSort:!1,sizeSort:!1,defaultSort:!0,showPage:!1}},onLoad(){},components:{tabber:I},created(){s.index.hideKeyboard()},methods:{closeSelect(){this.$parent.isSelectAll=!1,this.isSelectAll=!1;for(let e=0;e<this.selectItemsAry.length;e++)this.selectItemsAry[e].select=!1;this.selectItemsAry=[]},closePop(){this.$refs.midPop.close()},closeDel(){this.$refs.delAll.close()},selectShare(){if(this.selectItemsAry.length==0){s.index.showToast({icon:"none",title:"\u8BF7\u9009\u62E9\u6587\u4EF6"});return}this.$refs.selectRef.changeBtn(),this.$refs.selectRef.selectItemsAry=this.selectItemsAry,this.$refs.selectRef.$refs.sharePop.open()},multiplcDeleteFunc(){if(this.selectItemsAry.length==0){s.index.showToast({icon:"none",title:"\u8BF7\u9009\u62E9\u6587\u4EF6"});return}this.$refs.delAll.open()},async deleteSelectList(){s.index.showLoading({title:"\u5220\u9664\u4E2D"});let e=[];this.selectItemsAry.forEach(o=>{let l={};o.moveType=="1"?l.deleteID=o.fileId:l.deleteID=o.folderId,l.deleteType=o.moveType,e.push(l)});const i=await m.batchDelete(e);if(i.data.code!==0){s.index.showToast({icon:"none",title:i.data.msg});return}else s.index.hideLoading(),s.index.showToast({icon:"none",title:i.data.msg}),this.selectItemsAry=[],this.closeDel(),this.createData()},maskClose(){},getDetail(e){let i=0;this.breadCrumList.length!==0&&(i=this.breadCrumList[this.breadCrumList.length-1].folderId),this.superFolder=i,console.log(e),this.$refs.indexPop.showPage=!0,this.$refs.indexPop.$refs.shareSett.superFolder=i,this.$refs.indexPop.$refs.midPop.showPop(),this.$refs.indexPop.$refs.midPop.isShow=!0;let o=e;if(e.moveType==2)o.fileClass="floder";else{let l=h.getSuffix(e.fileName);h.isImage(l)?e.fileClass="image":h.isVideo(l)?e.fileClass="video":e.fileClass="file"}e.fileSize?o.size=e.fileSize:o.size=e.folderSize,e.fileName?o.name=e.fileName:o.name=e.folderName,this.$refs.indexPop.listItem=o},allSelectFunc(){this.quanxuan=!1,this.fileList.forEach(e=>e.select=!0),this.flodersList.forEach(e=>e.select=!0),this.allSelect=!this.allSelect,this.selectItemsAry=this.selectItemsAry.concat(this.fileList).concat(this.flodersList)},cancelAllSelectFunc(){this.quanxuan=!0,this.fileList.forEach(e=>e.select=!1),this.flodersList.forEach(e=>e.select=!1),this.allSelect=!this.allSelect,this.selectItemsAry=[]},delItemsFunc(e){this.selectItemsAry.push(e),this.itemData=e,e.select=!0,console.log(this.selectItemsAry)},breadFunc(e,i){if(this.selectArray=[],this.checked=!1,console.log(this.selectArray),e==0){this.breadCrumList=[],this.folderId=0,this.isShowTitle=!0,this.createData();return}this.breadCrumList.splice(i+1,this.breadCrumList.length),this.folderId=e.folderId,this.createData()},async createData(){let e=this.folderId;m.getEverboxList({superFolder:e,pageNum:this.pageNum,pageSize:1e3,defaultSort:this.defaultSort,timeSort:this.timeSort,sizeSort:this.sizeSort}).then(i=>{i.data.code!=401&&this.openNewListData(i)})},selectItemFunc(e){e.select=!1,this.allSelect=!1;for(let i=0;i<this.selectItemsAry.length;i++)this.selectItemsAry[i].select==!1&&this.selectItemsAry.splice(i,1);console.log(this.selectItemsAry)},goFolder(e){this.isSelectAll||(this.isShowTitle=!1,this.folderId=e.folderId,this.breadCrumList.push(e),m.getEverboxList({superFolder:e.folderId,pageNum:this.pageNum,defaultSort:!0,timeSort:!1,pageSize:1e3}).then(i=>{i.data.code==0&&(this.openNewListData(i),this.selectArray=[])}))},openNewListData(e){let i=e.data.data.foldersList;i.forEach(l=>{l.select=!1,l.moveType="2",l.utilsType=!1;let a=this.$options.filters.timedown(l.createDate),r=this.$options.filters.timedownnum(l.createDate);if(r==!0){let t=this.$options.filters.timedownshow(l.createDate),n=this.$options.filters.timedownshowmm(l.createDate);this.timeDate.push("\u4ECA\u5929  "+t+":"+n)}else if(a<=2&&r==!1){let t=this.$options.filters.timedownshow(l.createDate),n=this.$options.filters.timedownshowmm(l.createDate);this.timeDate.push("\u6628\u5929  "+t+":"+n)}else this.timeDate.push(l.createDate)});let o=e.data.data.filesList;o.forEach(l=>{l.select=!1,l.moveType="1",l.utilsType=!1;let a=this.$options.filters.timedown(l.createDate),r=this.$options.filters.timedownnum(l.createDate),t=l.fileName,n=t.split(".")[0],d=t.split(".")[t.split(".").length-1];if(n.length<=10)this.timename.push(n+"."+d);else{let u=n.substring(0,10);this.timename.push(u+"... ."+d)}if(r==!0){let u=this.$options.filters.timedownshow(l.createDate),p=this.$options.filters.timedownshowmm(l.createDate);this.timeDate.push("\u4ECA\u5929  "+u+":"+p)}else if(a<=2&&r==!1){let u=this.$options.filters.timedownshow(l.createDate),p=this.$options.filters.timedownshowmm(l.createDate);this.timeDate.push("\u6628\u5929  "+u+":"+p)}else this.timeDate.push(l.createDate);let w=h.getSuffix(l.fileName);h.isImage(w)?l.fileClass="image":h.isVideo(w)?l.fileClass="video":l.fileClass="file"}),this.flodersList=[],this.flodersList=this.flodersList.concat(i),this.fileList=[],this.fileList=this.fileList.concat(o)},closeSort(){this.$refs.sortPop.close()},titleChange(e){console.log(e),this.number=e},bodyCloseSelected(){this.isShowCollect=!1},searchClick(){s.index.navigateTo({url:"/pageIndex/index/searchCloud"})},showSort(){this.$refs.sortPop.open()},selectAll(){this.$parent.isSelectAll=!0,this.isSelectAll=!0},sortClick(e){this.sortNum=e},dateFormate(e){let i=this.$options.filters.timedown(e),o=this.$options.filters.timedownnum(e);if(o==!0){let l=this.$options.filters.timedownshow(e),a=this.$options.filters.timedownshowmm(e);return"\u4ECA\u5929  "+l+":"+a}else if(i<=2&&o==!1){let l=this.$options.filters.timedownshow(e),a=this.$options.filters.timedownshowmm(e);return"\u6628\u5929  "+l+":"+a}else return e},byTes(e){return e<=0?"0B":h.bytesToSize(e)}},computed:y({},s.mapState({userFlowData:e=>s.index.getStorageSync("userFlowData")?JSON.parse(e.userFlowData):{}})),filters:{typeDate(e){if(!!e)return DateYMD(e.expireDate)},hiddenAccout(e){if(e)return e.replace(/(\d{3})\d*(\d{4})/,"$1****$2")},formatinstDataaa(e){return formatinstData(e)},residue(e){return residuePrecision(e)},timedown(e){return h.timedown(e)},timedownshow(e){return h.timedownshow(e)},timedownshowmm(e){return h.timedownshowmm(e)},timedownnum(e){return h.timedownnum(e)}},async mounted(){const e=await m.getEverboxList({superFolder:0,pageNum:1,defaultSort:!0,timeSort:!1,pageSize:1e3});e.data.code==0&&await this.openNewListData(e)}};Array||s.resolveComponent("tabber")();function L(e,i,o,l,a,r){return s.e({a:!a.isSelectAll},a.isSelectAll?s.e({i:c._imports_3,j:s.o((...t)=>r.closeSelect&&r.closeSelect(...t)),k:a.quanxuan},a.quanxuan?{l:s.o((...t)=>r.allSelectFunc&&r.allSelectFunc(...t))}:{m:s.o((...t)=>r.cancelAllSelectFunc&&r.cancelAllSelectFunc(...t))}):{b:c._imports_0$1,c:s.o((...t)=>r.searchClick&&r.searchClick(...t)),d:s.o((...t)=>r.showSort&&r.showSort(...t)),e:c._imports_1,f:s.o((...t)=>r.selectAll&&r.selectAll(...t)),g:c._imports_2,h:a.isShowTitle==!1?1:""},{n:a.isShowTitle==!1},a.isShowTitle==!1?{o:s.o(t=>r.breadFunc(0)),p:s.f(a.breadCrumList,(t,n,d)=>({a:s.t(t.folderName),b:s.o(f=>r.breadFunc(t,n)),c:n}))}:{},{q:s.f(a.flodersList,(t,n,d)=>s.e({a:s.o(f=>r.goFolder(t)),b:s.t(t.folderName),c:s.t(r.dateFormate(t.createDate)),d:s.t(r.byTes(t.folderSize)),e:s.o(f=>r.goFolder(t))},a.isSelectAll?s.e({h:!t.select},t.select?{k:s.o(f=>r.selectItemFunc(t)),l:c._imports_7}:{i:s.o(f=>r.delItemsFunc(t)),j:c._imports_6}):{f:c._imports_5,g:s.o(f=>r.getDetail(t))},{m:n})),r:c._imports_4,s:!a.isSelectAll,t:s.f(a.fileList,(t,n,d)=>s.e({a:t.fileClass=="image"},t.fileClass=="image"?{b:c._imports_8}:{},{c:t.fileClass=="video"},t.fileClass=="video"?{d:c._imports_9}:{},{e:t.fileClass=="file"},t.fileClass=="file"?{f:c._imports_10}:{},{g:s.t(t.fileName),h:s.t(r.dateFormate(t.createDate)),i:s.t(r.byTes(t.fileSize))},a.isSelectAll?s.e({l:!t.select},t.select?{o:s.o(f=>r.selectItemFunc(t)),p:c._imports_7}:{m:s.o(f=>r.delItemsFunc(t)),n:c._imports_6}):{j:c._imports_5,k:s.o(f=>r.getDetail(t))},{q:n})),v:!a.isSelectAll,w:a.isSelectAll==!0?1:"",x:!a.isSelectAll},a.isSelectAll?{z:c._imports_11,A:s.o((...t)=>r.multiplcDeleteFunc&&r.multiplcDeleteFunc(...t))}:{y:s.p({pagePath:"/pageIndex/index/index"})})}var x=s._export_sfc(b,[["render",L],["__scopeId","data-v-7225d126"],["__file","D:/WXFile/WeChat Files/wxid_24g7xarmwwne22/FileStorage/File/2023-06/483a303c5dc0354ecc26cfa10a7ddca7_c3ad831319d2832c177ef660df75d852_8/wkkcApplet/pageIndex/myShare/myShare.vue"]]);wx.createComponent(x);
