"use strict";var o=require("../../common/vendor.js"),a=require("../../utils/index.js"),l=require("../../utils/api.js"),c=require("../../common/assets.js");require("../../utils/http.js");require("../../utils/index1.js");require("../../utils/base.js");const u=()=>"../../components/NavBer.js",d={data(){return{showChange:!1,typeShow:!0,commonInput:"",emailCode:"",password:"",password_2:"",count:60,timer:null,backgroundColor:"linear-gradient(180.14deg, #3679FF 0.12%, rgba(54, 121, 255, 0) 99.88%)"}},components:{navbar:u},watch:{commonInput:{immediate:!0,handler:a.Debounce(function(e){a.typePhone(e)?this.accountType="phone":a.isEmall(e)?this.accountType="email":this.accountType=""})}},onLoad(e){},methods:{goBack(){o.index.redirectTo({url:"/pages/login/login"})},psdChange(){this.showChange=!0},sendMsg(){let e=this;if(e.commonInput==""){o.index.showToast({icon:"none",title:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u53F7!"});return}if(e.accountType!="email"){o.index.showToast({icon:"none",title:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u53F7!"});return}l.slipGetEmailCode(e.commonInput,2).then(s=>{s.data.code==0?(o.index.showToast({icon:"none",title:"\u53D1\u9001\u6210\u529F"}),e.typeShow=!1,e.typeShow||(clearInterval(e.timer),e.timer=setInterval(()=>{e.count==1?(e.typeShow=!0,e.count=60):e.count-=1},1e3))):o.index.showToast({icon:"none",title:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u5931\u8D25"})})},forgetNext(){let e=this;if(e.showChange){if(e.password.length<6||e.password.length>15){o.index.showToast({icon:"none",title:"\u8BF7\u8F93\u51656~15\u4F4D\u5BC6\u7801"});return}if(e.password!=e.password_2){o.index.showToast({icon:"none",title:"\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4"});return}let s={};s.password=this.password,s.userName=this.commonInput,l.slipEmailPassword(s).then(r=>{r.data.code==0?(o.index.showToast({icon:"none",title:"\u4FEE\u6539\u6210\u529F"}),setTimeout(()=>{o.index.reLaunch({url:"/pages/login/phoneEmail"})},800)):o.index.showToast({icon:"none",title:r.data.msg})})}else{if(e.emailCode.length!=6){o.index.showToast({icon:"none",title:"\u8BF7\u8F93\u51656\u4F4D\u9A8C\u8BC1\u7801"});return}l.verifyEmailCode(e.commonInput,e.emailCode).then(s=>{s.data.code==0?this.showChange=!0:o.index.showToast({icon:"none",title:s.data.msg})})}}}};Array||o.resolveComponent("navbar")();function h(e,s,r,p,n,i){return o.e({a:o.o(i.goBack),b:o.p({background:n.backgroundColor,back:!0}),c:c._imports_0,d:n.showChange},n.showChange?{e:n.password,f:o.o(t=>n.password=t.detail.value),g:n.password_2,h:o.o(t=>n.password_2=t.detail.value)}:o.e({i:n.commonInput,j:o.o(t=>n.commonInput=t.detail.value),k:n.emailCode,l:o.o(t=>n.emailCode=t.detail.value),m:n.typeShow},n.typeShow?{n:o.o((...t)=>i.sendMsg&&i.sendMsg(...t))}:{o:o.t(n.count)}),{p:o.o((...t)=>i.forgetNext&&i.forgetNext(...t))})}var m=o._export_sfc(d,[["render",h],["__scopeId","data-v-9e3137f2"],["__file","E:/Code/BeiJing-Digitalsee/part-time-job/Group-project/pages/login/forgetPassword.vue"]]);wx.createPage(m);
