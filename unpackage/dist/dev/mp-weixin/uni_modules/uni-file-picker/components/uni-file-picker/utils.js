"use strict";var o=require("../../../../common/vendor.js");const s=e=>{const t=e.lastIndexOf("."),i=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,i)}},g=e=>Array.isArray(e)?e:e.replace(/(\[|\])/g,"").split(","),m=(e,t)=>{let i=[],a=[];return!t||t.length===0?{filePaths:i,files:a}:(e.tempFiles.forEach(n=>{const r=s(n.name).ext.toLowerCase();t.indexOf(r)!==-1&&(a.push(n),i.push(n.path))}),a.length!==e.tempFiles.length&&o.index.showToast({title:`\u5F53\u524D\u9009\u62E9\u4E86${e.tempFiles.length}\u4E2A\u6587\u4EF6 \uFF0C${e.tempFiles.length-a.length} \u4E2A\u6587\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E`,icon:"none",duration:5e3}),{filePaths:i,files:a})},h=e=>new Promise((t,i)=>{o.index.getImageInfo({src:e,success(a){t(a)},fail(a){i(a)}})}),u=async(e,t="image")=>{const a=s(e.name).ext.toLowerCase();let n={name:e.name,uuid:e.uuid,extname:a||"",cloudPath:e.cloudPath,fileType:e.fileType,url:e.path||e.path,size:e.size,image:{},path:e.path,video:{}};if(t==="image"){const l=await h(e.path);delete n.video,n.image.width=l.width,n.image.height=l.height,n.image.location=l.path}else delete n.image;return n};exports.get_extname=g;exports.get_file_data=u;exports.get_files_and_is_max=m;
